<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Let's Sync your mood!</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="/src/image/Icon.png">
    
</head>

<body>
  <div class="bg-gradient-to-b from-stone-950 to-yellow-950 h-screen flex items-center justify-center overflow-hidden">
        <header class="absolute inset-x-0 top-0 z-50">
            <nav class="flex items-center justify-between p-6 lg:px-8" aria-label="Global">
                <div class="flex lg:flex-1">
                    <a href="/dist/NonUser/LandingPage.html" class="-m-1.5 p-1.5">
                        <img class="h-8 w-auto" src="/src/image/Syncsation Logo.png" alt="">
                    </a>
                </div>
            </nav>
        </header>

        <section class="bg-gradient-to-b from-stone-950 to-yellow-950 h-screen overflow-hidden pt-20 lg:pt-32">
            <div class="lg:grid lg:min-h-screen lg:grid-cols-12">
                <main
                    class="flex items-center justify-center px-8 sm:px-12 lg:col-span-7 lg:px-16 lg:py-12 xl:col-span-6">
                    <div class="max-w-xl lg:max-w-3xl">
        
                        <h1 class="mt-4 text-3xl font-bold text-amber-300 sm:text-3xl md:text-5xl">
                            <span class="text-white">Welcome Back,</span>
                        </h1>
        
                        <p class="mt-4 text-3xl font-bold text-yellow-300 sm:text-3xl md:text-5xl">
                            <span class="text-stone-50">You're</span> syncsational
                        </p>
        
                        <form action="#" id="loginForm" class="mt-12 grid grid-cols-6 gap-6">
        
                            <div class="col-span-6 sm:col-span-5">
                                <label for="Email" class="block text-lg font-medium text-amber-300"> Email </label>
                                <input type="email" id="Email" name="email" placeholder="Input your email"
                                    class="mt-1 w-full h-[40px] px-4 rounded-md border-gray-200 bg-white text-lg text-gray-700 shadow-sm placeholder-gray-400" />
                            </div>
        
                            <div class="col-span-6 sm:col-span-5">
                                <label for="Password" class="block text-lg font-medium text-amber-300"> Password </label>
                                <input type="password" id="Password" name="password" placeholder="Input your password"
                                    class="mt-1 w-full h-[40px] px-4 rounded-md border-gray-200 bg-white text-lg text-gray-700 shadow-sm placeholder-gray-400" />
                                <div class="flex justify-end mt-2">
                                    <a href="###########"
                                        class="text-base text-amber-400 underline hover:text-stone-50">Forget
                                        Password?</a>
                                </div>
                            </div>
        
                            <!-- Error message (initially hidden) -->
                            <div id="error-message" class="col-span-6 text-red-500 text-lg hidden">
                                <!-- Error message will be inserted here -->
                            </div>
        
                            <div class="col-span-6 flex flex-col items-center gap-4 p-2">
                                <button type="submit"
                                    class="inline-block shrink-0 rounded-md border border-amber-400 bg-amber-300 px-12 py-3 text-base font-medium text-black transition hover:bg-transparent hover:text-white focus:outline-none focus:ring active:text-amber-300">
                                    Login
                                </button>
        
                                <p class="text-base text-amber-300 text-center">
                                    Not registered yet? 
                                    <a href="/dist/NonUser/Register.html"
                                        class="text-base text-amber-400 underline hover:text-stone-50">Create an Account</a>.
                                </p>
                            </div>
                        </form>
                    </div>
                </main>
                <aside
                    class="relative hidden lg:flex lg:col-span-4 lg:items-center lg:justify-end lg:-mr-5 lg:mt-10 lg:pb-0">
                    <img alt="Image description" src="/src/image/Mask group.svg" class="h-500 w-500 object-right" />
                </aside>
            </div>
        </section>
        
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async function(event) {
        event.preventDefault();

        const email = document.getElementById('Email').value;
        const password = document.getElementById('Password').value;

        try {
            const response = await fetch('http://localhost:3000/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (response.ok)     {
                // Store user info in localStorage
                // localStorage.setItem('token', data.token);
                // localStorage.setItem('userName', `${data.user.first_name} ${data.user.last_name}`);
                window.location.href = '/dist/User/Home.html';
            } else {
                alert(data.error);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('An error occurred while logging in.');
        }
    });

    </script>
    
</body>

</html>